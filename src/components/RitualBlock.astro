---
import { Image } from "astro:assets";

const { image, side = "left" } = Astro.props;

if (!image) {
  throw new Error("RitualBlock requires an image.");
}

const sideClass = side === "right" ? "block--right" : "block--left";
---

<div class={`ritual-block ${sideClass}`}>
  <div class="block-media">
    <Image
      src={image}
      alt=""
      loading="lazy"
      sizes="(max-width: 900px) 100vw, 50vw"
    />
  </div>

  <div class="block-content">
    <slot />
  </div>
</div>

<style>
  .ritual-block {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 3rem;
    align-items: start;
    margin-bottom: 4rem;
  }

  .block--right {
    direction: rtl;
  }

  .block--right .block-content,
  .block--right .block-media {
    direction: ltr;
  }

  .block-media img {
    width: 100%;
    height: auto;
    border-radius: 8px;
    display: block;
    box-shadow:
      0 20px 40px rgba(0, 0, 0, 0.08),
      0 6px 16px rgba(0, 0, 0, 0.06);
  }

  .block-content p {
    font-size: 1.05rem;
    line-height: 1.75;
    color: #444;
    margin-bottom: 1rem;
  }

  @media (max-width: 900px) {
    .ritual-block {
      grid-template-columns: 1fr;
      gap: 2rem;
    }

    .block--right {
      direction: ltr;
    }
  }
</style>
