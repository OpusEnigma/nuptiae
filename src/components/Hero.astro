---
import { Image } from "astro:assets";

/**
 * Props :
 * - image: ImageMetadata (astro:assets)
 */
const { image } = Astro.props;

if (!image) {
  throw new Error("Hero.astro requires an `image` prop imported from astro:assets");
}
---

<section class="hero">
  <div class="stage">
    <!-- IMAGE -->
    <Image
      src={image}
      alt="Overseas wedding landscape"
      class="image"
      priority
      sizes="(max-width: 1200px) 100vw, 1200px"
    />

    <!-- TITRE -->
    <div class="panel panel-title">
      <h1>Un mariage au-delà des océans</h1>
    </div>

    <!-- DATE -->
    <div class="panel panel-date">
      <p>23 août 2026</p>
    </div>

    <!-- SCROLL CUE -->
    <div class="scroll-cue" aria-hidden="true"></div>
  </div>
</section>

<style>

  /* ===== HERO (FOND / BANDES) ===== */
  .hero {
    height: 100vh;
    min-height: 600px;
    background: #f6f6f6;
    display: flex;
    align-items: center;
    justify-content: center;
    overflow: hidden;
  }

  /* ===== SCÈNE CENTRALE ===== */
  .stage {
    position: relative;

    /* la scène est CENTRÉE */
    margin-inline: auto;

    /* contrainte par la hauteur */
    height: 100%;

    /* ratio exact de l’image */
    aspect-ratio: 3 / 2;

    /* sécurité */
    max-width: 100%;
  }

  /* ===== IMAGE ===== */
  .image {
    width: 100%;
    height: 100%;
    object-fit: contain;
    display: block;
  }

  /* ===== PANELS ===== */
  .panel {
    position: absolute;
    background: #ffffff;
    padding: 1.4rem 2rem;
    box-shadow:
      0 10px 30px rgba(0, 0, 0, 0.12),
      0 2px 8px rgba(0, 0, 0, 0.08);
    z-index: 2;
  }

  /* TITRE */
  .panel-title {
    top: 2.5rem;
    left: -10rem;
  }

  .panel-title h1 {
    font-family: var(--font-display);
    font-size: 1.8rem;
    font-weight: 500;
    margin: 0;
    white-space: nowrap;
    letter-spacing: -0.015em;
  }

  /* DATE */
  .panel-date {
    bottom: 2.5rem;
    right: -10rem;
  }

  .panel-date p {
    margin: 0;
    font-size: 0.9rem;
    letter-spacing: 0.08em;
    text-transform: uppercase;
    color: #444;
  }

  /* ===== SCROLL CUE ===== */
  .scroll-cue {
    position: absolute;
    bottom: 1.5rem;
    left: 50%;
    transform: translateX(-50%);
    width: 1px;
    height: 48px;
    background: rgba(0, 0, 0, 0.35);
    z-index: 2;
  }

  /* ===== MOBILE ===== */
  @media (max-width: 768px) {
    .hero {
      height: 90vh;
      min-height: 480px;
    }

    .stage {
      width: 100%;
      height: auto;
      aspect-ratio: auto;
    }

    .panel-title {
      top: 1.5rem;
      left: 1.5rem;
      right: 1.5rem;
    }

    .panel-title h1 {
      white-space: normal;
      font-size: 1.5rem;
    }

    .panel-date {
      bottom: 1.5rem;
      right: 1.5rem;
    }
  }

  /* Animation très douce (optionnelle mais élégante) */
  @media (prefers-reduced-motion: no-preference) {
    .scroll-cue {
      animation: scrollHint 2.8s ease-in-out infinite;
    }

    @keyframes scrollHint {
      0% {
        opacity: 0.2;
        transform: translate(-50%, 0);
      }
      50% {
        opacity: 0.6;
        transform: translate(-50%, 10px);
      }
      100% {
        opacity: 0.2;
        transform: translate(-50%, 0);
      }
    }
  }

</style>
