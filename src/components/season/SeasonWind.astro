---
import SeasonBlock from "./SeasonBlock.astro";

const rows = [
  { year: "2021", vacW: 27, flicW: 18 },
  { year: "2022", vacW: 29, flicW: 19 },
  { year: "2023", vacW: 28, flicW: 18 },
  { year: "2024", vacW: 30, flicW: 20 },
  { year: "2025", vacW: 28, flicW: 19 },
];

const avg = { vacW: 28, flicW: 19 };

const refRows = [
  { ville: "Lille",       vacW: "25–30", vacMois: "mars",         flicW: "15–20", flicMois: "septembre" },
  { ville: "Paris",       vacW: "20–25", vacMois: "mars-avril",   flicW: "15–20", flicMois: "mai"        },
  { ville: "Lyon",        vacW: "15–20", vacMois: "février",      flicW: "10–15", flicMois: "été"        },
  { ville: "La Rochelle", vacW: "25–30", vacMois: "hiver",        flicW: "15–20", flicMois: "été"        },
];
---

<SeasonBlock id="season-wind" title="Vent">

  <div class="meteo-wrapper">

    <div class="meteo-scroll">
      <table class="meteo-table">
        <thead>
          <tr>
            <th class="col-year"></th>
            <th class="col-group">
              <span class="col-group-name">Vacoas (km/h)</span>
              <span class="col-group-sub">Plateau central</span>
            </th>
            <th class="col-group">
              <span class="col-group-name">Flic-en-Flac (km/h)</span>
              <span class="col-group-sub">Côte ouest</span>
            </th>
          </tr>
        </thead>
        <tbody>
          {rows.map(r => (
            <tr>
              <td class="td-year">{r.year}</td>
              <td class="td-wind">{r.vacW}</td>
              <td class="td-wind">{r.flicW}</td>
            </tr>
          ))}
          <tr class="avg-row">
            <td class="td-year">Moy.</td>
            <td class="td-wind">{avg.vacW}</td>
            <td class="td-wind">{avg.flicW}</td>
          </tr>
          <tr class="ref-sep">
            <td colspan="3" class="ref-sep-label">Équivalents en France métropolitaine</td>
          </tr>
          {refRows.map(r => (
            <tr class="ref-row">
              <td class="td-city">{r.ville}</td>
              <td class="td-wind">{r.vacW} <span class="td-period">({r.vacMois})</span></td>
              <td class="td-wind">{r.flicW} <span class="td-period">({r.flicMois})</span></td>
            </tr>
          ))}
        </tbody>
      </table>
    </div>

    <div class="analysis">
      <div class="text-columns">
        <p>Entre août et mi-septembre, le vent constitue un facteur important du ressenti climatique à Maurice et influence le choix des zones de séjour.</p>
        <p>Le <strong>plateau central</strong> (Vacoas et régions voisines) présente des conditions venteuses comparables à un printemps européen : air dynamique, rafraîchissement marqué et sensation plus fraîche que la température réelle. Cette ventilation contribue toutefois à un climat sain et agréable pour la randonnée ou les paysages naturels.</p>
        <p>La <strong>côte ouest</strong> (Flic-en-Flac) bénéficie d'un vent nettement plus faible, proche d'un été français modérément ventilé. Les conditions y sont plus calmes, plus chaudes et particulièrement favorables aux plages, à la baignade et aux activités nautiques.</p>
        <p>Pour les voyageurs recherchant un climat balnéaire stable et peu venteux durant l'hiver austral, la côte ouest apparaît comme la zone la plus confortable. Le plateau, plus exposé, offre une ambiance plus fraîche et tonique, renforçant la diversité climatique accessible à courte distance.</p>
      </div>
    </div>

  </div>

</SeasonBlock>

<style>
  .meteo-wrapper {
    display: flex;
    flex-direction: column;
    gap: var(--space-3);
    height: 100%;
    box-sizing: border-box;
  }

  /* Analysis */

  .analysis {
    padding-top: clamp(20px, 3vh, 28px);
    border-top: 1px solid #e6e2dc;
  }

  .text-columns {
    column-count: 2;
    column-gap: clamp(32px, 5vw, 56px);
    line-height: 1.7;
  }

  .text-columns p {
    margin: 0 0 1.1em;
    font-size: var(--fs-body);
    color: var(--color-text);
    break-inside: avoid;
  }

  .text-columns p:last-child {
    margin-bottom: 0;
  }

  @media (max-width: 900px) {
    .text-columns {
      column-count: 1;
    }
  }

  /* Table wrapper */

  .meteo-scroll {
    flex-shrink: 0;
    overflow: visible;
    border-radius: clamp(10px, 1.5vw, 16px);
    border: 1px solid #e0dbd4;
  }

  @media (max-width: 768px) {
    .meteo-scroll {
      overflow-x: auto;
      border-radius: clamp(8px, 2vw, 12px);
    }
  }

  /* Table */

  .meteo-table {
    width: 100%;
    border-collapse: collapse;
    font-size: clamp(0.72rem, 1.1vw, 0.82rem);
    line-height: var(--lh-tight);
    background: var(--color-page);
  }

  /* Group headers */

  thead tr:first-child th {
    padding: var(--space-1) var(--space-2);
    font-family: var(--font-display);
    font-weight: 500;
    font-size: clamp(0.75rem, 1.2vw, 0.9rem);
    letter-spacing: -0.01em;
    text-align: left;
    border-bottom: 1px solid #e0dbd4;
  }

  thead tr:first-child th.col-year {
    width: 8rem;
    border-right: 1px solid #e0dbd4;
  }

  thead tr:first-child th.col-group {
    text-align: center;
    padding-bottom: var(--space-2);
  }

  thead tr:first-child th.col-group + th.col-group {
    border-left: 1px solid #e0dbd4;
  }

  .col-group-name {
    display: block;
    font-family: var(--font-display);
    font-size: clamp(0.78rem, 1.2vw, 0.9rem);
  }

  .col-group-sub {
    display: block;
    font-family: var(--font-body);
    font-size: clamp(0.65rem, 1vw, 0.72rem);
    font-weight: 400;
    letter-spacing: 0.06em;
    text-transform: uppercase;
    color: var(--color-muted);
    margin-top: 1px;
  }

  /* Body rows */

  tbody tr {
    border-bottom: 1px solid #f0ede8;
    transition: background 0.15s ease;
  }

  tbody tr:hover {
    background: rgba(181, 135, 58, 0.04);
  }

  tbody tr:last-child {
    border-bottom: none;
  }

  td {
    padding: 6px var(--space-2);
    text-align: right;
    color: var(--color-text);
    font-variant-numeric: tabular-nums;
  }

  .td-year {
    text-align: left;
    font-weight: 500;
    color: var(--color-muted);
    font-size: var(--fs-small);
    letter-spacing: 0.08em;
    border-right: 1px solid #e0dbd4;
  }

  .td-wind {
    font-weight: 500;
  }

  /* Average row */

  .avg-row {
    border-top: 2px solid #d0ccc6;
    background: rgba(181, 135, 58, 0.06);
  }

  .avg-row td {
    font-weight: 600;
    padding-top: var(--space-2);
    padding-bottom: var(--space-2);
  }

  .avg-row .td-year {
    color: #b5873a;
    font-family: var(--font-body);
    font-size: var(--fs-small);
    letter-spacing: 0.1em;
    text-transform: uppercase;
  }

  .avg-row .td-wind {
    color: var(--color-text);
  }

  /* Reference rows */

  .ref-sep {
    border-top: 2px solid #d0ccc6;
    background: rgba(181, 135, 58, 0.03);
  }

  .ref-sep-label {
    padding: var(--space-1) var(--space-2);
    font-size: clamp(0.62rem, 0.9vw, 0.7rem);
    font-weight: 600;
    letter-spacing: 0.08em;
    text-transform: uppercase;
    color: var(--color-muted);
    text-align: left;
  }

  .ref-row td {
    opacity: 0.85;
  }

  .td-city {
    text-align: left;
    font-weight: 500;
    white-space: nowrap;
    color: var(--color-text);
    border-right: 1px solid #e0dbd4;
    padding: var(--space-1) var(--space-2);
    font-size: var(--fs-small);
  }

  .td-period {
    font-size: clamp(0.62rem, 0.9vw, 0.7rem);
    font-style: italic;
    font-weight: 400;
    color: var(--color-muted);
  }
</style>
