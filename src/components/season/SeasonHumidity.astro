---
import SeasonBlock from "./SeasonBlock.astro";

const { id } = Astro.props;

const rows = [
  { year: "2021", vacH: 83, flicH: 73 },
  { year: "2022", vacH: 82, flicH: 72 },
  { year: "2023", vacH: 84, flicH: 74 },
  { year: "2024", vacH: 85, flicH: 75 },
  { year: "2025", vacH: 83, flicH: 73 },
];

const avg = { vacH: 83, flicH: 73 };

const refRows = [
  { ville: "Lille",       vacH: "80–85", vacMois: "novembre", flicH: "70–75", flicMois: "septembre" },
  { ville: "Paris",       vacH: "75–80", vacMois: "décembre", flicH: "65–70", flicMois: "août"       },
  { ville: "Lyon",        vacH: "80–85", vacMois: "hiver",    flicH: "60–70", flicMois: "été"        },
  { ville: "La Rochelle", vacH: "80–85", vacMois: "hiver",    flicH: "70–75", flicMois: "été"        },
];
---

<SeasonBlock id={id} title="Humidité">

  <div class="meteo-wrapper">

    <div class="meteo-scroll">
      <table class="meteo-table">
        <thead>
          <tr>
            <th class="col-year"></th>
            <th class="col-group">
              <span class="col-group-name">Vacoas (%)</span>
              <span class="col-group-sub">Plateau central</span>
            </th>
            <th class="col-group">
              <span class="col-group-name">Flic-en-Flac (%)</span>
              <span class="col-group-sub">Côte ouest</span>
            </th>
          </tr>
        </thead>
        <tbody>
          {rows.map(r => (
            <tr>
              <td class="td-year">{r.year}</td>
              <td class="td-humid">{r.vacH}</td>
              <td class="td-humid">{r.flicH}</td>
            </tr>
          ))}
          <tr class="avg-row">
            <td class="td-year">Moy.</td>
            <td class="td-humid">{avg.vacH}</td>
            <td class="td-humid">{avg.flicH}</td>
          </tr>
          <tr class="ref-sep">
            <td colspan="3" class="ref-sep-label">Équivalents en France métropolitaine</td>
          </tr>
          {refRows.map(r => (
            <tr class="ref-row">
              <td class="td-city">{r.ville}</td>
              <td class="td-humid">{r.vacH} <span class="td-period">({r.vacMois})</span></td>
              <td class="td-humid">{r.flicH} <span class="td-period">({r.flicMois})</span></td>
            </tr>
          ))}
        </tbody>
      </table>
    </div>

    <div class="analysis">
      <div class="text-columns">
        <p>Entre août et mi-septembre, l'humidité contribue fortement au ressenti climatique à Maurice, au-delà de la seule température.</p>
        <p>Le <strong>plateau central</strong> (Vacoas et régions voisines) présente une atmosphère humide comparable à l'automne ou à l'hiver en Europe occidentale. L'air y est plus chargé en humidité, avec davantage de nuages et une sensation plus fraîche et parfois légèrement moite, surtout avec le vent. Cette ambiance favorise la végétation luxuriante et les paysages verts caractéristiques du centre de l'île.</p>
        <p>La <strong>côte ouest</strong> (Flic-en-Flac) offre au contraire une humidité modérée proche d'un été européen : air plus sec, ciel plus dégagé et sensation plus chaude et lumineuse. Les conditions y sont particulièrement agréables pour la plage et les activités extérieures, avec un confort thermique élevé.</p>
        <p>En pratique, l'hiver mauricien combine deux ambiances distinctes : plateau frais et humide, idéal pour la nature et les paysages verts ; côte ouest chaude et sèche, parfaite pour un séjour balnéaire confortable.</p>
      </div>
    </div>

  </div>

</SeasonBlock>

<style>
  .meteo-wrapper {
    display: flex;
    flex-direction: column;
    gap: var(--space-3);
    height: 100%;
    box-sizing: border-box;
  }

  /* Analysis */

  .analysis {
    padding-top: clamp(20px, 3vh, 28px);
    border-top: 1px solid #e6e2dc;
  }

  .text-columns {
    column-count: 2;
    column-gap: clamp(32px, 5vw, 56px);
    line-height: 1.7;
  }

  .text-columns p {
    margin: 0 0 1.1em;
    font-size: var(--fs-body);
    color: var(--color-text);
    break-inside: avoid;
  }

  .text-columns p:last-child {
    margin-bottom: 0;
  }

  @media (max-width: 900px) {
    .text-columns {
      column-count: 1;
    }
  }

  /* Table wrapper */

  .meteo-scroll {
    flex-shrink: 0;
    overflow: visible;
    border-radius: clamp(10px, 1.5vw, 16px);
    border: 1px solid #e0dbd4;
  }

  @media (max-width: 768px) {
    .meteo-scroll {
      overflow-x: auto;
      border-radius: clamp(8px, 2vw, 12px);
    }
  }

  /* Table */

  .meteo-table {
    width: 100%;
    border-collapse: collapse;
    font-size: clamp(0.72rem, 1.1vw, 0.82rem);
    line-height: var(--lh-tight);
    background: var(--color-page);
  }

  /* Group headers */

  thead tr:first-child th {
    padding: var(--space-1) var(--space-2);
    font-family: var(--font-display);
    font-weight: 500;
    font-size: clamp(0.75rem, 1.2vw, 0.9rem);
    letter-spacing: -0.01em;
    text-align: left;
    border-bottom: 1px solid #e0dbd4;
  }

  thead tr:first-child th.col-year {
    width: 8rem;
    border-right: 1px solid #e0dbd4;
  }

  thead tr:first-child th.col-group {
    text-align: center;
    padding-bottom: var(--space-2);
  }

  thead tr:first-child th.col-group + th.col-group {
    border-left: 1px solid #e0dbd4;
  }

  .col-group-name {
    display: block;
    font-family: var(--font-display);
    font-size: clamp(0.78rem, 1.2vw, 0.9rem);
  }

  .col-group-sub {
    display: block;
    font-family: var(--font-body);
    font-size: clamp(0.65rem, 1vw, 0.72rem);
    font-weight: 400;
    letter-spacing: 0.06em;
    text-transform: uppercase;
    color: var(--color-muted);
    margin-top: 1px;
  }

  /* Body rows */

  tbody tr {
    border-bottom: 1px solid #f0ede8;
    transition: background 0.15s ease;
  }

  tbody tr:hover {
    background: rgba(181, 135, 58, 0.04);
  }

  tbody tr:last-child {
    border-bottom: none;
  }

  td {
    padding: 6px var(--space-2);
    text-align: right;
    color: var(--color-text);
    font-variant-numeric: tabular-nums;
  }

  .td-year {
    text-align: left;
    font-weight: 500;
    color: var(--color-muted);
    font-size: var(--fs-small);
    letter-spacing: 0.08em;
    border-right: 1px solid #e0dbd4;
  }

  .td-humid {
    font-weight: 500;
  }

  /* Average row */

  .avg-row {
    border-top: 2px solid #d0ccc6;
    background: rgba(181, 135, 58, 0.06);
  }

  .avg-row td {
    font-weight: 600;
    padding-top: var(--space-2);
    padding-bottom: var(--space-2);
  }

  .avg-row .td-year {
    color: #b5873a;
    font-family: var(--font-body);
    font-size: var(--fs-small);
    letter-spacing: 0.1em;
    text-transform: uppercase;
  }

  .avg-row .td-humid {
    color: var(--color-text);
  }

  /* Reference rows */

  .ref-sep {
    border-top: 2px solid #d0ccc6;
    background: rgba(181, 135, 58, 0.03);
  }

  .ref-sep-label {
    padding: var(--space-1) var(--space-2);
    font-size: clamp(0.62rem, 0.9vw, 0.7rem);
    font-weight: 600;
    letter-spacing: 0.08em;
    text-transform: uppercase;
    color: var(--color-muted);
    text-align: left;
  }

  .ref-row td {
    opacity: 0.85;
  }

  .td-city {
    text-align: left;
    font-weight: 500;
    white-space: nowrap;
    color: var(--color-text);
    border-right: 1px solid #e0dbd4;
    padding: var(--space-1) var(--space-2);
    font-size: var(--fs-small);
  }

  .td-period {
    font-size: clamp(0.62rem, 0.9vw, 0.7rem);
    font-style: italic;
    font-weight: 400;
    color: var(--color-muted);
  }
</style>
