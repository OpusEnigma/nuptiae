---
import { Image } from "astro:assets";

const { images = [] } = Astro.props;

if (!images.length) {
  throw new Error("RitualFooter requires at least one image.");
}
---

<div class="ritual-footer">
  {images.map((img) => (
    <div class="ritual-footer-item">
      <Image src={img} alt="" />
    </div>
  ))}
</div>

<style>
  .ritual-footer {
    display: grid;
    grid-auto-flow: column;
    grid-auto-columns: minmax(clamp(120px, 20vw, 160px), 1fr);
    gap: var(--space-3);
    margin-top: var(--space-7);
  }

  /* Portrait container */
  .ritual-footer-item {
    aspect-ratio: 3 / 4;
    overflow: hidden;
    border-radius: clamp(8px, 2vw, 14px);
  }

  /* Image */
  .ritual-footer-item :global(img) {
    display: block;
    width: 100%;
    height: 100%;
    object-fit: cover;
  }

  /* Mobile horizontal scroll */
  @media (max-width: 768px) {
    .ritual-footer {
      overflow-x: auto;
      grid-auto-columns: 70%;
      padding-bottom: 0.5rem;
      gap: var(--space-2);

      -webkit-overflow-scrolling: touch; /* iOS momentum */
    }
  }

  /* Dark mode */
  @media (prefers-color-scheme: dark) {
    .ritual-footer-item {
      border: 1px solid rgba(255, 255, 255, 0.1);
    }
  }

  /* Touch device optimization */
  @media (hover: none), (pointer: coarse) {
    .ritual-footer {
      -webkit-overflow-scrolling: touch;
    }
  }
</style>
